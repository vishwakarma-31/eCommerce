import{u as w,j as e,L as E,B as g}from"./index-Db17rpNr.js";import{r as n}from"./vendor-nf7bT_Uh.js";import{I as p}from"./Input-DZsv7WCF.js";import{u as P}from"./router-DubZYNKk.js";import"./utils-ngrFHoWO.js";const k=a=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a),B=()=>{const{currentUser:a,isAuthenticated:c,updateProfile:h}=w(),b=P(),[t,x]=n.useState({name:"",email:"",bio:""}),[r,o]=n.useState({}),[j,S]=n.useState(!1),[u,f]=n.useState(!1);n.useEffect(()=>{a&&x({name:a.name||"",email:a.email||"",bio:a.bio||""})},[a]);const d=s=>{const{name:i,value:m}=s.target;x(l=>({...l,[i]:m})),r[i]&&o(l=>({...l,[i]:""}))},y=()=>{const s={};return t.name?t.name.length<2&&(s.name="Name must be at least 2 characters"):s.name="Name is required",t.email?k(t.email)||(s.email="Email address is invalid"):s.email="Email is required",s},N=async s=>{var m,l;s.preventDefault();const i=y();if(Object.keys(i).length>0){o(i);return}f(!0);try{await h(t)}catch(v){o({general:((l=(m=v.response)==null?void 0:m.data)==null?void 0:l.message)||"Failed to update profile"})}finally{f(!1)}};return j?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(E,{})}):c?e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"md:flex md:items-center md:justify-between mb-8",children:e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate",children:"My Profile"})})}),e.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[e.jsxs("div",{className:"px-4 py-5 sm:px-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Profile Information"}),e.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Personal details and application access."})]}),e.jsx("div",{className:"border-t border-gray-200",children:e.jsxs("form",{onSubmit:N,className:"px-4 py-5 sm:p-6",children:[r.general&&e.jsx("div",{className:"rounded-md bg-red-50 p-4 mb-6",children:e.jsx("div",{className:"text-sm text-red-700",children:r.general})}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsx(p,{label:"Full Name",id:"name",name:"name",type:"text",value:t.name,onChange:d,error:r.name,required:!0}),e.jsx(p,{label:"Email address",id:"email",name:"email",type:"email",value:t.email,onChange:d,error:r.email,required:!0}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700 mb-1",children:"Bio"}),e.jsx("textarea",{id:"bio",name:"bio",rows:4,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:t.bio,onChange:d}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Brief description for your profile. URLs are hyperlinked."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),e.jsx("div",{className:"mt-1 flex items-center",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800",children:a==null?void 0:a.role})})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(g,{type:"submit",disabled:u,children:u?"Updating...":"Update Profile"})})]})})]})]}):e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Please log in"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You need to be logged in to view your profile."}),e.jsx(g,{onClick:()=>b("/login"),children:"Go to Login"})]})})};export{B as default};
