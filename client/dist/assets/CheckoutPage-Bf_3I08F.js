import{u as w,c as E,j as e,B as m}from"./index-Db17rpNr.js";import{r as o}from"./vendor-nf7bT_Uh.js";import{I as i}from"./Input-DZsv7WCF.js";import{u as S}from"./router-DubZYNKk.js";import"./utils-ngrFHoWO.js";const A=()=>{const{isAuthenticated:j,currentUser:k}=w(),{cartItems:x,cartTotal:l,clearCart:f}=E(),c=S(),[r,y]=o.useState({firstName:"",lastName:"",email:"",address:"",city:"",state:"",zipCode:"",country:"United States",cardName:"",cardNumber:"",cardExpiry:"",cardCvc:""}),[a,u]=o.useState({}),[h,g]=o.useState(!1),t=s=>{const{name:d,value:q}=s.target;y(n=>({...n,[d]:q})),a[d]&&u(n=>({...n,[d]:""}))},b=()=>{const s={};return r.firstName||(s.firstName="First name is required"),r.lastName||(s.lastName="Last name is required"),r.email?/\S+@\S+\.\S+/.test(r.email)||(s.email="Email address is invalid"):s.email="Email is required",r.address||(s.address="Address is required"),r.city||(s.city="City is required"),r.state||(s.state="State is required"),r.zipCode||(s.zipCode="ZIP code is required"),r.cardName||(s.cardName="Name on card is required"),r.cardNumber?/^\d{16}$/.test(r.cardNumber.replace(/\s/g,""))||(s.cardNumber="Card number must be 16 digits"):s.cardNumber="Card number is required",r.cardExpiry||(s.cardExpiry="Expiration date is required"),r.cardCvc?/^\d{3,4}$/.test(r.cardCvc)||(s.cardCvc="CVC must be 3 or 4 digits"):s.cardCvc="CVC is required",s},v=async s=>{s.preventDefault();const d=b();if(Object.keys(d).length>0){u(d);return}g(!0),setTimeout(()=>{f(),g(!1),c("/orders",{state:{message:"Order placed successfully! Thank you for your purchase."}})},2e3)},C=0,p=l*.08,N=l+C+p;return j?x.length===0?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Your cart is empty"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Add some products to your cart before checking out."}),e.jsx(m,{onClick:()=>c("/products"),children:"Browse Products"})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"md:flex md:items-center md:justify-between mb-8",children:e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate",children:"Checkout"})})}),e.jsxs("div",{className:"lg:grid lg:grid-cols-2 lg:gap-x-12 xl:gap-x-16",children:[e.jsx("div",{children:e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"border-b border-gray-200 pb-10",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Shipping information"}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-y-6 sm:grid-cols-2 sm:gap-x-4",children:[e.jsx(i,{label:"First name",id:"firstName",name:"firstName",value:r.firstName,onChange:t,error:a.firstName,required:!0}),e.jsx(i,{label:"Last name",id:"lastName",name:"lastName",value:r.lastName,onChange:t,error:a.lastName,required:!0}),e.jsx("div",{className:"sm:col-span-2",children:e.jsx(i,{label:"Email address",id:"email",name:"email",type:"email",value:r.email,onChange:t,error:a.email,required:!0})}),e.jsx("div",{className:"sm:col-span-2",children:e.jsx(i,{label:"Address",id:"address",name:"address",value:r.address,onChange:t,error:a.address,required:!0})}),e.jsx(i,{label:"City",id:"city",name:"city",value:r.city,onChange:t,error:a.city,required:!0}),e.jsx(i,{label:"State",id:"state",name:"state",value:r.state,onChange:t,error:a.state,required:!0}),e.jsx(i,{label:"ZIP / Postal code",id:"zipCode",name:"zipCode",value:r.zipCode,onChange:t,error:a.zipCode,required:!0}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),e.jsxs("select",{id:"country",name:"country",value:r.country,onChange:t,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[e.jsx("option",{children:"United States"}),e.jsx("option",{children:"Canada"}),e.jsx("option",{children:"Mexico"})]})]})]})]}),e.jsxs("div",{className:"mt-10 border-b border-gray-200 pb-10",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Payment"}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-y-6 sm:grid-cols-2 sm:gap-x-4",children:[e.jsx("div",{className:"sm:col-span-2",children:e.jsx(i,{label:"Name on card",id:"cardName",name:"cardName",value:r.cardName,onChange:t,error:a.cardName,required:!0})}),e.jsx("div",{className:"sm:col-span-2",children:e.jsx(i,{label:"Card number",id:"cardNumber",name:"cardNumber",value:r.cardNumber,onChange:t,error:a.cardNumber,placeholder:"0000 0000 0000 0000",required:!0})}),e.jsx(i,{label:"Expiration date (MM/YY)",id:"cardExpiry",name:"cardExpiry",value:r.cardExpiry,onChange:t,error:a.cardExpiry,placeholder:"MM/YY",required:!0}),e.jsx(i,{label:"CVC",id:"cardCvc",name:"cardCvc",value:r.cardCvc,onChange:t,error:a.cardCvc,placeholder:"123",required:!0})]})]}),e.jsx("div",{className:"mt-10",children:e.jsx(m,{type:"submit",className:"w-full",disabled:h,children:h?"Processing...":`Pay $${N.toFixed(2)}`})})]})}),e.jsx("div",{className:"mt-10 lg:mt-0",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg px-4 py-6 sm:p-6 lg:p-8",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-6",children:"Order summary"}),e.jsx("ul",{className:"divide-y divide-gray-200",children:x.map(s=>e.jsxs("li",{className:"flex py-4",children:[e.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-md overflow-hidden",children:s.product.images&&s.product.images.length>0?e.jsx("img",{src:s.product.images[0],alt:s.product.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-500 text-xs",children:"No image"})})}),e.jsxs("div",{className:"ml-4 flex-1 flex flex-col",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex justify-between text-base font-medium text-gray-900",children:[e.jsx("h3",{children:s.product.title}),e.jsxs("p",{className:"ml-4",children:["$",(s.product.price*s.quantity).toFixed(2)]})]})}),e.jsx("div",{className:"flex-1 flex items-end justify-between text-sm",children:e.jsxs("p",{className:"text-gray-500",children:["Qty ",s.quantity]})})]})]},s.product._id))}),e.jsxs("dl",{className:"space-y-4 border-t border-gray-200 pt-4 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("dt",{className:"text-sm text-gray-600",children:"Subtotal"}),e.jsxs("dd",{className:"text-sm font-medium text-gray-900",children:["$",l.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("dt",{className:"text-sm text-gray-600",children:"Shipping"}),e.jsx("dd",{className:"text-sm font-medium text-gray-900",children:"Free"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("dt",{className:"text-sm text-gray-600",children:"Tax"}),e.jsxs("dd",{className:"text-sm font-medium text-gray-900",children:["$",p.toFixed(2)]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 flex items-center justify-between",children:[e.jsx("dt",{className:"text-base font-medium text-gray-900",children:"Order total"}),e.jsxs("dd",{className:"text-base font-medium text-gray-900",children:["$",N.toFixed(2)]})]})]})]})})]})]}):e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Please log in"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You need to be logged in to checkout."}),e.jsx(m,{onClick:()=>c("/login"),children:"Go to Login"})]})})};export{A as default};
