import{u as b,j as e,B as S,L as E,r as L}from"./index-Db17rpNr.js";import{r as l}from"./vendor-nf7bT_Uh.js";import{I as p}from"./Input-DZsv7WCF.js";import{u as C,a as P,L as g}from"./router-DubZYNKk.js";import"./utils-ngrFHoWO.js";const I=()=>{var u,x;const[a,h]=l.useState({email:"",password:""}),[i,n]=l.useState({}),[d,m]=l.useState(!1),{login:f}=b(),w=C(),j=((x=(u=P().state)==null?void 0:u.from)==null?void 0:x.pathname)||"/",c=s=>{const{name:t,value:o}=s.target;h(r=>({...r,[t]:o})),i[t]&&n(r=>({...r,[t]:""}))},v=()=>{const s={};return a.email?/\S+@\S+\.\S+/.test(a.email)||(s.email="Email address is invalid"):s.email="Email is required",a.password?a.password.length<6&&(s.password="Password must be at least 6 characters"):s.password="Password is required",s},y=async s=>{var o,r;s.preventDefault();const t=v();if(Object.keys(t).length>0){n(t);return}m(!0);try{await L(()=>f(a.email,a.password),2,1e3),w(j,{replace:!0})}catch(N){n({general:((r=(o=N.response)==null?void 0:o.data)==null?void 0:r.message)||"Login failed. Please check your credentials."})}finally{m(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsx("div",{children:e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"})}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:y,children:[i.general&&e.jsx("div",{className:"rounded-md bg-red-50 p-4",children:e.jsx("div",{className:"text-sm text-red-700",children:i.general})}),e.jsx(p,{label:"Email address",id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:a.email,onChange:c,error:i.email}),e.jsx(p,{label:"Password",id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:a.password,onChange:c,error:i.password}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"text-sm",children:e.jsx(g,{to:"/forgot-password",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Forgot your password?"})})}),e.jsx("div",{children:e.jsx(S,{type:"submit",className:"w-full",disabled:d,children:d?e.jsx(E,{size:"sm",color:"white"}):"Sign in"})})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx(g,{to:"/register",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Sign up"})]})})]})})};export{I as default};
