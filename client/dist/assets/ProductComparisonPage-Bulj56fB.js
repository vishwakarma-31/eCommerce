import{r as d,j as e,L as p,c as j,b as y,d as v}from"./index-BdJnNWXt.js";import{p as g}from"./productService-BEVAxDlY.js";import{P as N}from"./ProgressBar-CbDWmlug.js";const w=({products:n})=>{const[a,i]=d.useState([]),c=s=>{a.some(t=>t._id===s._id)?i(a.filter(t=>t._id!==s._id)):a.length<3&&i([...a,s])},o=s=>{i(a.filter(t=>t._id!==s))},r=(s,t)=>e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-4 px-4 text-sm font-medium text-gray-900",children:s}),a.map(l=>e.jsx("td",{className:"py-4 px-4 text-sm text-gray-500 text-center",children:t(l)},l._id))]});return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Compare Products"}),a.length>0?e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex flex-wrap gap-4 mb-4",children:a.map(s=>e.jsxs("div",{className:"flex items-center bg-gray-50 rounded-lg px-3 py-2",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-md overflow-hidden",children:s.images&&s.images.length>0?e.jsx("img",{src:s.images[0],alt:s.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"bg-gray-200 w-full h-full"})}),e.jsx("div",{className:"ml-2 min-w-0 flex-1",children:e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.title})}),e.jsx("button",{onClick:()=>o(s._id),className:"ml-2 text-gray-400 hover:text-gray-500",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},s._id))}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-4 text-left text-sm font-medium text-gray-500",children:"Feature"}),a.map(s=>e.jsx("th",{className:"py-3 px-4 text-center text-sm font-medium text-gray-500",children:s.title},s._id))]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[r("Price",s=>`$${s.price.toFixed(2)}`),r("Category",s=>s.category),r("Rating",s=>e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"flex text-yellow-400",children:[...Array(5)].map((t,l)=>e.jsx("svg",{className:`w-4 h-4 ${l<Math.floor(s.averageRating)?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},l))}),e.jsx("span",{className:"ml-1 text-sm text-gray-500",children:s.averageRating.toFixed(1)})]})),r("Funding Goal",s=>s.fundingGoal?`$${s.fundingGoal}`:"N/A"),r("Current Funding",s=>s.currentFunding?`$${s.currentFunding}`:"N/A"),r("Funding Progress",s=>s.fundingGoal?e.jsx("div",{className:"w-full",children:e.jsx(N,{current:s.currentFunding,total:s.fundingGoal,showLabel:!1})}):"N/A"),r("Days Left",s=>s.deadline?Math.ceil((new Date(s.deadline)-new Date)/(1e3*60*60*24)):"N/A"),r("Creator",s=>{var t;return((t=s.creator)==null?void 0:t.name)||"Unknown"}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-4 px-4 text-sm font-medium text-gray-900",children:"Actions"}),a.map(s=>e.jsx("td",{className:"py-4 px-4 text-center",children:e.jsx(p,{to:`/product/${s._id}`,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-primary-gradient shadow-sm hover:shadow-md",children:"View Details"})},s._id))]})]})]})})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No products selected"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Select up to 3 products to compare their features."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-3",children:a.length>0?"Add more products to compare":"Select products to compare"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:n.filter(s=>!a.some(t=>t._id===s._id)).slice(0,6).map(s=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-primary-300 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-md overflow-hidden",children:s.images&&s.images.length>0?e.jsx("img",{src:s.images[0],alt:s.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"bg-gray-200 w-full h-full"})}),e.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.title}),e.jsxs("p",{className:"text-xs text-gray-500",children:["$",s.price.toFixed(2)]})]}),e.jsx("button",{onClick:()=>c(s),disabled:a.length>=3&&!a.some(t=>t._id===s._id),className:`ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full ${a.some(t=>t._id===s._id)?"bg-primary-100 text-primary-600":"bg-gray-100 text-gray-400 hover:bg-gray-200"} ${a.length>=3&&!a.some(t=>t._id===s._id)?"opacity-50 cursor-not-allowed":""}`,children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})})})]})},s._id))})]})]})},C=()=>{const n=j(),a=y(),[i,c]=d.useState([]),[o,r]=d.useState(!0),[s,t]=d.useState(null);return d.useEffect(()=>{(async()=>{try{r(!0);const h=new URLSearchParams(n.search).getAll("product");if(h.length===0){const m=await g.getProducts({limit:12});c(m.data.products||[])}else{const m=h.map(x=>g.getProductById(x)),f=await Promise.all(m);c(f.map(x=>x.data))}r(!1)}catch{t("Failed to load products"),r(!1)}})()},[n.search]),o?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(v,{})})}):s?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error loading products"}),e.jsx("p",{className:"text-gray-600 mb-6",children:s}),e.jsx("button",{onClick:()=>a("/products"),className:"text-indigo-600 hover:text-indigo-500 font-medium",children:"Browse all products"})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Product Comparison"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Compare features, prices, and ratings of similar products side-by-side."})]}),e.jsx(w,{products:i}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("button",{onClick:()=>a("/products"),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Browse More Products"})})]})};export{C as default};
