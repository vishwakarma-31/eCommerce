import{r as l,u as b,b as S,c as E,j as e,L as p,d as L}from"./index-BdJnNWXt.js";import{I as g}from"./Input-IdQeoUSy.js";import{B as C}from"./Button-Bl_ngrCl.js";const F=()=>{var u,x;const[a,h]=l.useState({email:"",password:""}),[i,n]=l.useState({}),[d,c]=l.useState(!1),{login:f}=b(),w=S(),j=((x=(u=E().state)==null?void 0:u.from)==null?void 0:x.pathname)||"/",m=s=>{const{name:t,value:o}=s.target;h(r=>({...r,[t]:o})),i[t]&&n(r=>({...r,[t]:""}))},v=()=>{const s={};return a.email?/\S+@\S+\.\S+/.test(a.email)||(s.email="Email address is invalid"):s.email="Email is required",a.password?a.password.length<6&&(s.password="Password must be at least 6 characters"):s.password="Password is required",s},y=async s=>{var o,r;s.preventDefault();const t=v();if(Object.keys(t).length>0){n(t);return}c(!0);try{await f(a.email,a.password),w(j,{replace:!0})}catch(N){n({general:((r=(o=N.response)==null?void 0:o.data)==null?void 0:r.message)||"Login failed. Please check your credentials."})}finally{c(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsx("div",{children:e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"})}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:y,children:[i.general&&e.jsx("div",{className:"rounded-md bg-red-50 p-4",children:e.jsx("div",{className:"text-sm text-red-700",children:i.general})}),e.jsx(g,{label:"Email address",id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:a.email,onChange:m,error:i.email}),e.jsx(g,{label:"Password",id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:a.password,onChange:m,error:i.password}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"text-sm",children:e.jsx(p,{to:"/forgot-password",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Forgot your password?"})})}),e.jsx("div",{children:e.jsx(C,{type:"submit",className:"w-full",disabled:d,children:d?e.jsx(L,{size:"sm",color:"white"}):"Sign in"})})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx(p,{to:"/register",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Sign up"})]})})]})})};export{F as default};
