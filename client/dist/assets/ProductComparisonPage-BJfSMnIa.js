import{j as e,u as h,A as d,y as i,L as u}from"./index-BqjcH8Ld.js";import{r as m}from"./vendor-CDaM45aE.js";import{f as y}from"./formatUtils-nvCfqLlX.js";import{L as f}from"./LazyImage-BBJ-urm_.js";import{u as j}from"./router-CmN49VLu.js";import"./utils-ngrFHoWO.js";const N=({products:s,onRemove:a})=>{const c=t=>t.status!=="Funding"?null:Math.round(t.currentFunding/t.fundingGoal*100),o=t=>({Funding:"bg-blue-100 text-blue-800",Successful:"bg-green-100 text-green-800",Failed:"bg-red-100 text-red-800",InProduction:"bg-yellow-100 text-yellow-800",Marketplace:"bg-purple-100 text-purple-800",OutOfStock:"bg-gray-100 text-gray-800",Discontinued:"bg-gray-100 text-gray-800"})[t]||"bg-gray-100 text-gray-800";return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),s.map(t=>e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("button",{onClick:()=>a(t._id),className:"ml-auto text-gray-400 hover:text-gray-600 mb-2",children:"âœ•"}),e.jsx(f,{src:t.images[0],alt:t.title,className:"w-24 h-24 object-cover rounded-md mb-2"}),e.jsx("h3",{className:"font-medium text-gray-900 text-center",children:t.title})]})},t._id))]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Price"}),s.map(t=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:y(t.price)},t._id))]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Category"}),s.map(t=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:t.category},t._id))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Status"}),s.map(t=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${o(t.status)}`,children:t.status})},t._id))]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Funding Progress"}),s.map(t=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:t.status==="Funding"?e.jsxs("div",{children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-1",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${c(t)}%`}})}),e.jsxs("span",{children:[c(t),"%"]})]}):e.jsx("span",{children:"N/A"})},t._id))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Rating"}),s.map(t=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("span",{className:"text-yellow-400 mr-1",children:"â˜…"}),e.jsx("span",{children:t.averageRating.toFixed(1)}),e.jsxs("span",{className:"text-gray-400 ml-1",children:["(",t.totalReviews,")"]})]})},t._id))]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Creator"}),s.map(t=>{var n;return e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:((n=t.creator)==null?void 0:n.name)||"Unknown"},t._id)})]})]})]})})},_=()=>{const[s,a]=m.useState([]),[c,o]=m.useState(!0),{user:t}=h(),n=j();m.useEffect(()=>{x()},[]);const x=async()=>{try{o(!0);const r=await d.get("/compare");a(r.data.data)}catch(r){i.error("Failed to fetch comparison products"),console.error("Error fetching comparison products:",r)}finally{o(!1)}},p=async r=>{try{await d.delete(`/compare/remove/${r}`),a(s.filter(l=>l._id!==r)),i.success("Product removed from comparison")}catch(l){i.error("Failed to remove product from comparison"),console.error("Error removing product from comparison:",l)}},g=async()=>{try{await d.delete("/compare/clear"),a([]),i.success("Comparison cleared")}catch(r){i.error("Failed to clear comparison"),console.error("Error clearing comparison:",r)}};return c?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(u,{})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Product Comparison"}),s.length>0&&e.jsx("button",{onClick:g,className:"px-4 py-2 text-sm font-medium text-red-700 bg-red-100 rounded-md hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Clear All"})]}),s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-5xl mb-4",children:"ðŸ”"}),e.jsx("h2",{className:"text-xl font-medium text-gray-900 mb-2",children:"No products to compare"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Add products to compare them side by side"}),e.jsx("button",{onClick:()=>n("/products"),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Browse Products"})]}):e.jsxs("div",{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("p",{className:"text-gray-600",children:["Comparing ",s.length," product",s.length!==1?"s":""]})}),e.jsx(N,{products:s,onRemove:p})]})]})};export{_ as default};
