import{j as e,r as o,g as q,b as H,u as G,f as J,d as Y,L as y}from"./index-BdJnNWXt.js";import{p as Q}from"./productService-BEVAxDlY.js";import{B as f}from"./Button-Bl_ngrCl.js";import{P as K}from"./ProgressBar-CbDWmlug.js";import{I as M}from"./Input-IdQeoUSy.js";import{L as F,C as X,S as Z}from"./LazyImage-B_TodhVr.js";const N=({rating:s,onRatingChange:n,editable:i=!1,size:r="md"})=>{const c={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},t=a=>{i&&n&&n(a)};return e.jsx("div",{className:"flex",children:[1,2,3,4,5].map(a=>e.jsx("svg",{className:`${c[r]} ${a<=s?"text-yellow-400":"text-gray-300"} ${i?"cursor-pointer hover:text-yellow-500":""}`,fill:"currentColor",viewBox:"0 0 20 20",onClick:()=>t(a),children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},a))})},ee=({review:s})=>e.jsxs("div",{className:"border-b border-gray-200 py-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"bg-gray-200 border-2 border-dashed rounded-xl w-10 h-10"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.user.name}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{rating:s.rating,size:"sm"}),e.jsx("span",{className:"ml-2 text-sm text-gray-500",children:new Date(s.createdAt).toLocaleDateString()})]})]})]})}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-gray-700",children:s.comment})}),s.response&&e.jsxs("div",{className:"mt-3 ml-4 pl-4 border-l-2 border-indigo-200",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("p",{className:"text-sm font-medium text-indigo-600",children:"Creator Response"})}),e.jsx("div",{className:"mt-1",children:e.jsx("p",{className:"text-gray-700",children:s.response})})]})]}),te=({onSubmit:s,onCancel:n,initialRating:i=0})=>{const[r,c]=o.useState(i),[t,a]=o.useState(""),[l,m]=o.useState({}),u=d=>{d.preventDefault();const x={};if(r===0&&(x.rating="Please select a rating"),t.trim()?t.trim().length<10&&(x.comment="Review must be at least 10 characters"):x.comment="Please enter your review",Object.keys(x).length>0){m(x);return}s({rating:r,comment:t})};return e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Rating ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(N,{rating:r,onRatingChange:c,editable:!0,size:"lg"}),l.rating&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.rating})]}),e.jsx(M,{label:"Review",id:"comment",placeholder:"Share your experience with this product...",value:t,onChange:d=>a(d.target.value),error:l.comment,required:!0,className:"h-24"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(f,{variant:"outline",type:"button",onClick:n,children:"Cancel"}),e.jsx(f,{type:"submit",children:"Submit Review"})]})]})},z=({onSubmit:s,onCancel:n,placeholder:i="Write a comment..."})=>{const[r,c]=o.useState(""),[t,a]=o.useState({}),l=m=>{m.preventDefault();const u={};if(r.trim()?r.trim().length<5&&(u.comment="Comment must be at least 5 characters"):u.comment="Please enter your comment",Object.keys(u).length>0){a(u);return}s({comment:r}),c("")};return e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsx(M,{id:"comment",placeholder:i,value:r,onChange:m=>c(m.target.value),error:t.comment,required:!0,className:"h-20"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[n&&e.jsx(f,{variant:"outline",type:"button",onClick:n,children:"Cancel"}),e.jsx(f,{type:"submit",children:"Post Comment"})]})]})},L=({comment:s,onReply:n,depth:i=0})=>{const[r,c]=o.useState(!1),[t,a]=o.useState(s.replies||[]),l=d=>{const x={_id:Date.now().toString(),user:{name:"Current User"},comment:d.comment,createdAt:new Date().toISOString(),replies:[]};a([...t,x]),c(!1)},m=(d,x)=>{const p=v=>v.map(g=>{if(g._id===x){const w={_id:Date.now().toString(),user:{name:"Current User"},comment:d.comment,createdAt:new Date().toISOString(),replies:[]};return{...g,replies:[...g.replies,w]}}return g.replies&&g.replies.length>0?{...g,replies:p(g.replies)}:g});a(p(t))},u=d=>new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return e.jsxs("div",{className:`${i>0?"ml-8":""} border-b border-gray-200 py-4`,children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"bg-gray-200 border-2 border-dashed rounded-xl w-8 h-8"})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:s.user.name}),e.jsx("span",{className:"text-xs text-gray-500",children:u(s.createdAt)})]}),e.jsx("div",{className:"mt-1 text-gray-700",children:e.jsx("p",{children:s.comment})}),e.jsx("div",{className:"mt-2",children:e.jsx("button",{onClick:()=>c(!r),className:"text-sm text-indigo-600 hover:text-indigo-500",children:"Reply"})}),r&&e.jsx("div",{className:"mt-3",children:e.jsx(z,{onSubmit:l,onCancel:()=>c(!1),placeholder:"Write a reply..."})})]})]}),t.length>0&&e.jsx("div",{className:"mt-4",children:t.map(d=>e.jsx(L,{comment:d,onReply:m,depth:i+1},d._id))})]})},se=({currentFunding:s,fundingGoal:n,onNewBacker:i})=>{const[r,c]=o.useState(s),[t,a]=o.useState(!1),[l,m]=o.useState([]);o.useEffect(()=>{const d=setInterval(()=>{if(Math.random()>.7&&r<n){const x={id:Date.now(),name:`Backer ${Math.floor(Math.random()*1e3)}`,amount:Math.floor(Math.random()*50)+10,timestamp:new Date};m(p=>[x,...p.slice(0,4)]),c(p=>Math.min(p+x.amount,n)),a(!0),i&&i(x),setTimeout(()=>a(!1),1e3)}},5e3);return()=>clearInterval(d)},[r,n,i]);const u=Math.min(100,Math.round(r/n*100));return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Live Funding Progress"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[e.jsxs("span",{children:["$",r," of $",n," raised"]}),e.jsxs("span",{children:[u,"% funded"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:e.jsx("div",{className:`bg-primary-gradient h-4 rounded-full transition-all duration-1000 ease-out ${t?"animate-pulse":""}`,style:{width:`${u}%`}})})]}),l.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Recent Backers"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:l.map(d=>e.jsxs("div",{className:`flex items-center p-2 rounded-lg ${t?"bg-green-50":"bg-gray-50"}`,children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary-100 flex items-center justify-center",children:e.jsx("span",{className:"text-primary-800 font-bold text-xs",children:d.name.charAt(0)})}),e.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:d.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Backed $",d.amount]})]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Just now"})]},d.id))})]})]})},re=({rewards:s,backersCount:n})=>{var i;return e.jsx("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 rounded-xl p-6 mb-6 border border-yellow-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-8 h-8 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Early Bird Rewards"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Limited-time discounts for the first backers! Only ",((i=s[0])==null?void 0:i.limit)-n," spots left."]}),e.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:s.map((r,c)=>e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-yellow-100",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900",children:r.title}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:r.description})]}),n<r.limit&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Available"})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Original Price"}),e.jsxs("p",{className:"text-sm line-through text-gray-400",children:["$",r.originalPrice]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Your Price"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["$",r.discountedPrice]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[e.jsxs("span",{children:[n," backers"]}),e.jsxs("span",{children:[r.limit-n," left"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:`${Math.min(100,n/r.limit*100)}%`}})})]}),n>=r.limit?e.jsx("button",{disabled:!0,className:"mt-3 w-full inline-flex justify-center items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-gray-400 bg-gray-100 cursor-not-allowed",children:"Sold Out"}):e.jsx("button",{className:"mt-3 w-full inline-flex justify-center items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 shadow-sm",children:"Claim Reward"})]},c))})]})]})})},ae=({updates:s,canPostUpdates:n})=>{const[i,r]=o.useState(!1),[c,t]=o.useState({title:"",content:""}),a=l=>{l.preventDefault(),console.log("Posting update:",c),t({title:"",content:""}),r(!1)};return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Project Updates"}),n&&e.jsx("button",{onClick:()=>r(!i),className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md text-white bg-primary-gradient shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:i?"Cancel":"Post Update"})]}),i&&e.jsxs("form",{onSubmit:a,className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"updateTitle",className:"block text-sm font-medium text-gray-700",children:"Update Title"}),e.jsx("input",{type:"text",id:"updateTitle",value:c.title,onChange:l=>t({...c,title:l.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"What's the update about?",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"updateContent",className:"block text-sm font-medium text-gray-700",children:"Content"}),e.jsx("textarea",{id:"updateContent",rows:3,value:c.content,onChange:l=>t({...c,content:l.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Share the details of your progress...",required:!0})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-gradient hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Post Update"})})]}),e.jsx("div",{className:"space-y-6",children:s&&s.length>0?s.map(l=>e.jsxs("div",{className:"border-b border-gray-200 pb-6 last:border-0 last:pb-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"bg-gray-200 border-2 border-dashed rounded-xl w-10 h-10"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:l.title}),e.jsxs("p",{className:"text-sm text-gray-500",children:[l.creatorName," â€¢ ",new Date(l.date).toLocaleDateString()]})]})]}),e.jsx("div",{className:"mt-3 ml-13",children:e.jsx("p",{className:"text-gray-600",children:l.content})}),l.likes>0&&e.jsxs("div",{className:"mt-3 ml-13 flex items-center text-sm text-gray-500",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),l.likes," likes"]})]},l.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No updates yet"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n?"Post your first update to keep backers informed about your progress.":"Check back later for updates from the creator."})]})})]})},ne=({product:s,fundingProgress:n})=>{const i={facebook:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}&quote=Check out this amazing project: ${s.title}`,twitter:`https://twitter.com/intent/tweet?text=Check out this amazing project: ${s.title}&url=${encodeURIComponent(window.location.href)}&hashtags=innovation,funding,${s.category.replace(/\s+/g,"")}`,linkedin:`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(window.location.href)}`,reddit:`https://reddit.com/submit?url=${encodeURIComponent(window.location.href)}&title=Check out this amazing project: ${s.title}`,whatsapp:`https://api.whatsapp.com/send?text=Check out this amazing project: ${s.title} ${encodeURIComponent(window.location.href)}`},r=t=>{window.open(i[t],"_blank","noopener,noreferrer,width=600,height=400")},c=`Check out "${s.title}" - it's ${n}% funded!`;return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Share This Project"}),e.jsx("div",{className:"bg-gradient-to-r from-primary-50 to-secondary-50 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:s.images&&s.images.length>0?e.jsx("img",{src:s.images[0],alt:s.title,className:"w-16 h-16 object-cover rounded-md"}):e.jsx("div",{className:"bg-gray-200 border-2 border-dashed rounded-xl w-16 h-16"})}),e.jsxs("div",{className:"ml-4 flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 truncate",children:s.title}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-gradient h-2 rounded-full",style:{width:`${n}%`}})}),e.jsxs("span",{className:"ml-2 text-xs font-medium text-gray-500",children:[n,"%"]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[e.jsxs("button",{onClick:()=>r("facebook"),className:"flex flex-col items-center justify-center p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200","aria-label":"Share on Facebook",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.879v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.129 22 16.99 22 12z"})})}),e.jsx("span",{className:"mt-1 text-xs text-gray-500",children:"Facebook"})]}),e.jsxs("button",{onClick:()=>r("twitter"),className:"flex flex-col items-center justify-center p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200","aria-label":"Share on Twitter",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-400 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})}),e.jsx("span",{className:"mt-1 text-xs text-gray-500",children:"Twitter"})]}),e.jsxs("button",{onClick:()=>r("linkedin"),className:"flex flex-col items-center justify-center p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200","aria-label":"Share on LinkedIn",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-700 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})}),e.jsx("span",{className:"mt-1 text-xs text-gray-500",children:"LinkedIn"})]}),e.jsxs("button",{onClick:()=>r("reddit"),className:"flex flex-col items-center justify-center p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200","aria-label":"Share on Reddit",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-500 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"})})}),e.jsx("span",{className:"mt-1 text-xs text-gray-500",children:"Reddit"})]}),e.jsxs("button",{onClick:()=>r("whatsapp"),className:"flex flex-col items-center justify-center p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200","aria-label":"Share on WhatsApp",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-500 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})}),e.jsx("span",{className:"mt-1 text-xs text-gray-500",children:"WhatsApp"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"shareText",className:"block text-sm font-medium text-gray-700 mb-1",children:"Share text"}),e.jsx("textarea",{id:"shareText",rows:2,value:c,readOnly:!0,className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm bg-gray-50"}),e.jsxs("button",{onClick:()=>navigator.clipboard.writeText(c),className:"mt-2 inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-primary-700 bg-primary-100 hover:bg-primary-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy Text"]})]})]})},le=({product:s,user:n})=>{const[i,r]=o.useState({projectFunded:!0,projectLive:!0,newComment:!0,orderShipped:!0,newProducts:!0}),c=a=>{r(l=>({...l,[a]:!l[a]}))},t=a=>{switch(a){case"projectFunded":return{subject:`ðŸŽ‰ ${s.title} has been successfully funded!`,preview:"Great news! The project you backed has reached its funding goal."};case"projectLive":return{subject:`ðŸš€ ${s.title} is now live!`,preview:"The project you backed is now available for purchase."};case"newComment":return{subject:`ðŸ’¬ New comment on ${s.title}`,preview:"Someone commented on the project you're following."};case"orderShipped":return{subject:`ðŸ“¦ Your order for ${s.title} has shipped!`,preview:"Your order is on its way. Track your shipment here."};case"newProducts":return{subject:`âœ¨ New products in ${s.category}`,preview:"Check out these new products in categories you're interested in."};default:return{subject:"",preview:""}}};return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Email Notifications"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Choose which notifications you'd like to receive about this project."}),e.jsx("div",{className:"space-y-4",children:Object.entries(i).map(([a,l])=>{const m=t(a);return e.jsxs("div",{className:"flex items-start p-4 rounded-lg border border-gray-200 hover:bg-gray-50",children:[e.jsx("div",{className:"flex items-center h-5",children:e.jsx("input",{id:a,name:a,type:"checkbox",checked:l,onChange:()=>c(a),className:"h-4 w-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"})}),e.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[e.jsx("label",{htmlFor:a,className:"block text-sm font-medium text-gray-700",children:m.subject}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:m.preview})]})]},a)})}),e.jsxs("div",{className:"mt-6 flex items-center",children:[e.jsx("svg",{className:"flex-shrink-0 h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Notifications will be sent to ",e.jsx("span",{className:"font-medium text-gray-700",children:(n==null?void 0:n.email)||"your registered email"})]})})]})]})},ie=({backers:s})=>{const[n,i]=o.useState("public"),r=()=>{const a=["public","anonymous","private"],m=(a.indexOf(n)+1)%a.length;i(a[m])},c=()=>{switch(n){case"public":return e.jsxs("svg",{className:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:[e.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),e.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]});case"anonymous":return e.jsxs("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:[e.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z",clipRule:"evenodd"}),e.jsx("path",{d:"M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"})]});case"private":return e.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})});default:return null}},t=()=>{switch(n){case"public":return"Public";case"anonymous":return"Anonymous";case"private":return"Private";default:return""}};return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Top Backers"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm text-gray-500 mr-2",children:t()}),e.jsx("button",{onClick:r,className:"p-1 rounded-full hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-primary-500","aria-label":"Toggle privacy settings",children:c()})]})]}),e.jsx("div",{className:"space-y-4",children:s.map((a,l)=>e.jsxs("div",{className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center",children:e.jsx("span",{className:"text-primary-800 font-bold",children:l+1})}),e.jsxs("div",{className:"ml-4 flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:n==="public"?a.name:"Anonymous Backer"}),l<3&&e.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:["Top ",l+1]})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[a.projectsSupported," projects supported"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",a.totalSpent]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[a.backsCount," backs"]})]})]},a.id))}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{className:"text-primary-600 hover:text-primary-500 text-sm font-medium",children:"View full leaderboard"})})]})},ue=()=>{var C,k,S,R,P,B;const{id:s}=q(),n=H(),{isAuthenticated:i,currentUser:r}=G(),{addToCart:c}=J(),[t,a]=o.useState(null),[l,m]=o.useState(!0),[u,d]=o.useState(null),[x,p]=o.useState(1),[v,g]=o.useState(!1),[w,$]=o.useState("");o.useEffect(()=>{(async()=>{try{m(!0);const b=await Q.getProductById(s);a(b.data),m(!1)}catch{d("Failed to load product"),m(!1)}})()},[s]);const A=o.useMemo(()=>!t||!t.fundingGoal?0:Math.min(100,Math.round(t.currentFunding/t.fundingGoal*100)),[t]),D=o.useMemo(()=>!t||!t.deadline?null:Math.ceil((new Date(t.deadline)-new Date)/(1e3*60*60*24)),[t]),T=async()=>{if(!i){n("/login");return}alert("Pre-order functionality would be implemented here")},I=()=>{if(!i){n("/login");return}if(t.status==="Funding"){T();return}c(t,x)},U=h=>{console.log("Review submitted:",h),g(!1)},E=h=>{console.log("Comment submitted:",h),$("")},V=h=>{console.log("New backer:",h)};if(l)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(Y,{})});if(u||!t)return e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Product not found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The product you're looking for doesn't exist or has been removed."}),e.jsx(y,{to:"/products",className:"text-indigo-600 hover:text-indigo-500 font-medium",children:"Browse all products"})]})});const j=t.status==="Funding",W=t.status==="Marketplace",O=[{id:1,name:"Alex Johnson",projectsSupported:12,totalSpent:420,backsCount:8},{id:2,name:"Sam Wilson",projectsSupported:8,totalSpent:310,backsCount:5},{id:3,name:"Jordan Lee",projectsSupported:15,totalSpent:580,backsCount:12},{id:4,name:"Taylor Kim",projectsSupported:6,totalSpent:220,backsCount:4},{id:5,name:"Morgan Reed",projectsSupported:10,totalSpent:350,backsCount:7}],_=[{id:1,title:"Prototype Testing Complete",content:"We've finished testing the prototype and made some great improvements based on feedback.",creatorName:((C=t.creator)==null?void 0:C.name)||"Creator",date:new Date(Date.now()-3*24*60*60*1e3),likes:12},{id:2,title:"Design Finalized",content:"The final design has been approved and we're moving into the production phase.",creatorName:((k=t.creator)==null?void 0:k.name)||"Creator",date:new Date(Date.now()-7*24*60*60*1e3),likes:8},{id:3,title:"Funding Milestone Reached",content:"We've hit 50% of our funding goal! Thank you all for your support.",creatorName:((S=t.creator)==null?void 0:S.name)||"Creator",date:new Date(Date.now()-14*24*60*60*1e3),likes:24}];return t.price,(t.price*.7).toFixed(2),t.price,(t.price*.6).toFixed(2),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 mb-16",children:[e.jsxs("div",{children:[e.jsx("div",{className:"bg-gray-200 rounded-lg overflow-hidden aspect-square flex items-center justify-center",children:t.images&&t.images.length>0?e.jsx(F,{src:t.images[0],alt:t.title,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-gray-500",children:"No image available"})}),e.jsx("div",{className:"grid grid-cols-4 gap-4 mt-4",children:t.images&&t.images.slice(1,5).map((h,b)=>e.jsx("div",{className:"bg-gray-200 rounded-lg overflow-hidden aspect-square",children:e.jsx(F,{src:h,alt:`${t.title} ${b+1}`,className:"w-full h-full object-cover"})},b))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t.title}),t.creator&&t.creator.isVerified&&e.jsx(X,{isVerified:t.creator.isVerified,size:"md"})]}),j&&t.successProbability&&e.jsx("div",{className:"mb-3",children:e.jsx(Z,{probability:t.successProbability,size:"md"})}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(N,{rating:t.averageRating}),e.jsxs("span",{className:"ml-2 text-gray-600",children:[t.averageRating.toFixed(1)," (",t.totalReviews," reviews)"]})]}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 mb-4",children:["$",t.price.toFixed(2)]}),e.jsx("div",{className:"prose max-w-none text-gray-600 mb-6",children:e.jsx("p",{children:t.description})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Category"}),e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800",children:t.category})]}),j&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Funding Progress"}),e.jsx(K,{current:t.currentFunding,total:t.fundingGoal,label:"backers"}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mt-1",children:[e.jsxs("span",{children:[t.currentFunding," of ",t.fundingGoal," backers"]}),e.jsxs("span",{children:[D," days left"]})]})]}),j&&e.jsx(se,{currentFunding:t.currentFunding,fundingGoal:t.fundingGoal,onNewBacker:V}),j&&t.earlyBirdRewards&&t.earlyBirdRewards.length>0&&e.jsx(re,{rewards:t.earlyBirdRewards,backersCount:t.currentFunding}),W&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Quantity"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>p(Math.max(1,x-1)),className:"px-3 py-1 border border-gray-300 rounded-l-md",children:"-"}),e.jsx("input",{type:"number",min:"1",value:x,onChange:h=>p(Math.max(1,parseInt(h.target.value)||1)),className:"w-16 px-3 py-1 border-t border-b border-gray-300 text-center"}),e.jsx("button",{onClick:()=>p(x+1),className:"px-3 py-1 border border-gray-300 rounded-r-md",children:"+"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4",children:[e.jsx(f,{onClick:I,className:"flex-1",children:j?"Back This Project":"Add to Cart"}),i&&e.jsx(f,{variant:"outline",className:"flex-1",children:"Add to Wishlist"})]}),e.jsxs("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"bg-gray-200 border-2 border-dashed rounded-xl w-12 h-12"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Created by"}),e.jsx("p",{className:"text-sm text-gray-600",children:((R=t.creator)==null?void 0:R.name)||"Unknown Creator"})]})]}),e.jsx("div",{className:"mt-3",children:e.jsx(y,{to:`/creator/${(P=t.creator)==null?void 0:P._id}`,className:"text-indigo-600 hover:text-indigo-500 text-sm font-medium",children:"View creator profile"})})]})]})]}),j&&e.jsx(ne,{product:t,fundingProgress:A}),i&&j&&e.jsx(le,{product:t,user:r}),j&&e.jsx(ie,{backers:O}),j&&e.jsx(ae,{updates:_,canPostUpdates:i&&(r==null?void 0:r._id)===((B=t.creator)==null?void 0:B._id)}),e.jsxs("section",{className:"mb-16",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Comments"}),i?e.jsx("div",{className:"mb-8",children:e.jsx(z,{onSubmit:E,placeholder:"Share your thoughts about this product..."})}):e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-8 text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Please log in to leave a comment."}),e.jsx(y,{to:"/login",className:"text-indigo-600 hover:text-indigo-500 font-medium",children:"Log in to comment"})]}),e.jsx("div",{children:t.comments&&t.comments.length>0?t.comments.map(h=>e.jsx(L,{comment:h},h._id)):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No comments yet. Be the first to comment!"})})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Reviews"}),i&&!v&&e.jsx(f,{variant:"outline",onClick:()=>g(!0),children:"Write a Review"})]}),v?e.jsx("div",{className:"mb-8",children:e.jsx(te,{onSubmit:U,onCancel:()=>g(!1)})}):!i&&t.reviews&&t.reviews.length===0?e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-8 text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Please log in to write a review."}),e.jsx(y,{to:"/login",className:"text-indigo-600 hover:text-indigo-500 font-medium",children:"Log in to review"})]}):null,e.jsx("div",{children:t.reviews&&t.reviews.length>0?t.reviews.map(h=>e.jsx(ee,{review:h},h._id)):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No reviews yet. Be the first to review!"})})]})]})};export{ue as default};
